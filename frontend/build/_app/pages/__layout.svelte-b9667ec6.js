import{S as s,i as t,s as n,e,t as a,k as o,c as r,a as c,g as l,d as i,n as u,b as f,f as h,D as p,E as d,F as m,G as $,H as v,I as y,J as x,h as g,K as w,j as E,m as b,o as j,L as k,M as A,N,x as P,u as I,v as S}from"../chunks/vendor-ec965bd2.js";import{u as O}from"../chunks/user-96e9540c.js";import{r as B}from"../chunks/dataStore-a6af55cf.js";function D(s){let t,n,d,m,$,v=s[1].username+"";return{c(){t=e("a"),n=a("เพิ่ม"),d=o(),m=e("span"),$=a(v),this.h()},l(s){t=r(s,"A",{href:!0,class:!0});var e=c(t);n=l(e,"เพิ่ม"),e.forEach(i),d=u(s),m=r(s,"SPAN",{class:!0});var a=c(m);$=l(a,v),a.forEach(i),this.h()},h(){f(t,"href","/new"),f(t,"class","font-mono no-underline mr-3"),f(m,"class","font-mono text-gray-500")},m(s,e){h(s,t,e),p(t,n),h(s,d,e),h(s,m,e),p(m,$)},p(s,t){2&t&&v!==(v=s[1].username+"")&&g($,v)},d(s){s&&i(t),s&&i(d),s&&i(m)}}}function T(s){let t,n;return{c(){t=e("a"),n=a("เข้าใช้งาน"),this.h()},l(s){t=r(s,"A",{href:!0,class:!0});var e=c(t);n=l(e,"เข้าใช้งาน"),e.forEach(i),this.h()},h(){f(t,"href","/login"),f(t,"class","font-mono no-underline")},m(s,e){h(s,t,e),p(t,n)},p:$,d(s){s&&i(t)}}}function V(s){let t,n,v,y,x,g,w,E,b,j;function k(s,t){return s[1]?D:T}let A=k(s),N=A(s);return{c(){t=e("nav"),n=e("div"),v=e("a"),y=a("PBOX"),x=o(),g=e("input"),w=o(),E=e("section"),N.c(),this.h()},l(s){t=r(s,"NAV",{class:!0});var e=c(t);n=r(e,"DIV",{class:!0});var a=c(n);v=r(a,"A",{href:!0});var o=c(v);y=l(o,"PBOX"),o.forEach(i),x=u(a),g=r(a,"INPUT",{class:!0,type:!0,name:!0,id:!0,placeholder:!0}),w=u(a),E=r(a,"SECTION",{});var f=c(E);N.l(f),f.forEach(i),a.forEach(i),e.forEach(i),this.h()},h(){f(v,"href","/"),f(g,"class","outline-none"),f(g,"type","search"),f(g,"name","search"),f(g,"id","search"),f(g,"placeholder","พิมพ์ คำ ค้นหาที่นี่"),f(n,"class","flex items-center justify-between container mx-auto"),f(t,"class","bg-white border-b border-gray-500 py-2 px-4 w-full")},m(e,a){h(e,t,a),p(t,n),p(n,v),p(v,y),p(n,x),p(n,g),d(g,s[0]),p(n,w),p(n,E),N.m(E,null),b||(j=m(g,"input",s[3]),b=!0)},p(s,[t]){1&t&&d(g,s[0]),A===(A=k(s))&&N?N.p(s,t):(N.d(1),N=A(s),N&&(N.c(),N.m(E,null)))},i:$,o:$,d(s){s&&i(t),N.d(),b=!1,j()}}}function X(s,t,n){let e,a;v(s,B,(s=>n(4,e=s))),v(s,O,(s=>n(1,a=s)));let o="",{posts:r=[]}=t;const c=new y(r,{keys:["title","content"]});return s.$$set=s=>{"posts"in s&&n(2,r=s.posts)},s.$$.update=()=>{5&s.$$.dirty&&x(B,e=o?c.search(o).map((s=>s.item)):r,e)},[o,a,r,function(){o=this.value,n(0,o)}]}class C extends s{constructor(s){super(),t(this,s,X,V,n,{posts:2})}}function F(s){let t,n,e;t=new C({props:{posts:s[0]}});const a=s[2].default,r=w(a,s,s[1],null);return{c(){E(t.$$.fragment),n=o(),r&&r.c()},l(s){b(t.$$.fragment,s),n=u(s),r&&r.l(s)},m(s,a){j(t,s,a),h(s,n,a),r&&r.m(s,a),e=!0},p(s,[n]){const o={};1&n&&(o.posts=s[0]),t.$set(o),r&&r.p&&(!e||2&n)&&k(r,a,s,s[1],e?N(a,s[1],n,null):A(s[1]),null)},i(s){e||(P(t.$$.fragment,s),P(r,s),e=!0)},o(s){I(t.$$.fragment,s),I(r,s),e=!1},d(s){S(t,s),s&&i(n),r&&r.d(s)}}}var G=function(s,t,n,e){return new(n||(n=Promise))((function(a,o){function r(s){try{l(e.next(s))}catch(t){o(t)}}function c(s){try{l(e.throw(s))}catch(t){o(t)}}function l(s){var t;s.done?a(s.value):(t=s.value,t instanceof n?t:new n((function(s){s(t)}))).then(r,c)}l((e=e.apply(s,t||[])).next())}))};const H=({fetch:s})=>G(void 0,void 0,void 0,(function*(){const t=yield s("/posts");return{props:{posts:yield t.json()}}}));function J(s,t,n){let{$$slots:e={},$$scope:a}=t,{posts:o=[]}=t;return s.$$set=s=>{"posts"in s&&n(0,o=s.posts),"$$scope"in s&&n(1,a=s.$$scope)},[o,a,e]}class K extends s{constructor(s){super(),t(this,s,J,F,n,{posts:0})}}export{K as default,H as load};
