import{S as s,i as a,s as e,e as t,t as o,k as n,c as l,a as i,g as c,d as r,n as u,b as d,f,D as h,E as v,F as p,P as m,G as g,Q as y,H as b,J as E}from"../chunks/vendor-ec965bd2.js";import{g as w}from"../chunks/navigation-2ffed81e.js";import{u as j}from"../chunks/user-96e9540c.js";import"../chunks/singletons-12a22614.js";function x(s){let a,e,b,E,w,j,x,L,k,P,I,T,D,N,O,S,A,B,U,V,F;return{c(){a=t("form"),e=t("h1"),b=o("Login"),E=n(),w=t("div"),j=t("label"),x=o("Email"),L=n(),k=t("input"),P=n(),I=t("div"),T=t("label"),D=o("Password"),N=n(),O=t("input"),S=n(),A=t("div"),B=t("button"),U=o("Login"),this.h()},l(s){a=l(s,"FORM",{class:!0});var t=i(a);e=l(t,"H1",{class:!0});var o=i(e);b=c(o,"Login"),o.forEach(r),E=u(t),w=l(t,"DIV",{class:!0});var n=i(w);j=l(n,"LABEL",{for:!0,class:!0});var d=i(j);x=c(d,"Email"),d.forEach(r),L=u(n),k=l(n,"INPUT",{type:!0,placeholder:!0,class:!0}),n.forEach(r),P=u(t),I=l(t,"DIV",{class:!0});var f=i(I);T=l(f,"LABEL",{for:!0,class:!0});var h=i(T);D=c(h,"Password"),h.forEach(r),N=u(f),O=l(f,"INPUT",{type:!0,placeholder:!0,class:!0}),f.forEach(r),S=u(t),A=l(t,"DIV",{class:!0});var v=i(A);B=l(v,"BUTTON",{class:!0,type:!0});var p=i(B);U=c(p,"Login"),p.forEach(r),v.forEach(r),t.forEach(r),this.h()},h(){d(e,"class","text-center text-2xl font-bold"),d(j,"for","email"),d(j,"class","svelte-11g8bsn"),d(k,"type","text"),d(k,"placeholder","Enter your email"),d(k,"class","svelte-11g8bsn"),d(w,"class","my-1"),d(T,"for","password"),d(T,"class","svelte-11g8bsn"),d(O,"type","password"),d(O,"placeholder","Enter your password"),d(O,"class","svelte-11g8bsn"),d(I,"class","my-1"),d(B,"class","submit svelte-11g8bsn"),d(B,"type","submit"),d(A,"class","my-3"),d(a,"class","container mx-auto my-4")},m(t,o){f(t,a,o),h(a,e),h(e,b),h(a,E),h(a,w),h(w,j),h(j,x),h(w,L),h(w,k),v(k,s[0]),h(a,P),h(a,I),h(I,T),h(T,D),h(I,N),h(I,O),v(O,s[1]),h(a,S),h(a,A),h(A,B),h(B,U),V||(F=[p(k,"input",s[3]),p(O,"input",s[4]),p(a,"submit",m(s[2]))],V=!0)},p(s,[a]){1&a&&k.value!==s[0]&&v(k,s[0]),2&a&&O.value!==s[1]&&v(O,s[1])},i:g,o:g,d(s){s&&r(a),V=!1,y(F)}}}function L(s,a,e){let t;b(s,j,(s=>e(5,t=s)));var o=this&&this.__awaiter||function(s,a,e,t){return new(e||(e=Promise))((function(o,n){function l(s){try{c(t.next(s))}catch(a){n(a)}}function i(s){try{c(t.throw(s))}catch(a){n(a)}}function c(s){var a;s.done?o(s.value):(a=s.value,a instanceof e?a:new e((function(s){s(a)}))).then(l,i)}c((t=t.apply(s,a||[])).next())}))};let n="",l="";return[n,l,function(){var s,a,e,i;return o(this,void 0,void 0,(function*(){const o=yield fetch("http://localhost:1337/auth/local",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({identifier:n,password:l})});if(o.ok){const s=yield o.json();localStorage.setItem("token",s.jwt),s&&(E(j,t=s.user,t),w("/"))}else{const t=yield o.json();(null===(i=null===(e=null===(a=null===(s=null==t?void 0:t.message)||void 0===s?void 0:s[0])||void 0===a?void 0:a.messages)||void 0===e?void 0:e[0])||void 0===i?void 0:i.message)&&alert(t.message[0].messages[0].message)}}))},function(){n=this.value,e(0,n)},function(){l=this.value,e(1,l)}]}class k extends s{constructor(s){super(),a(this,s,L,x,e,{})}}export{k as default};
